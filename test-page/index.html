<html>
    <head>
      <title>forest-plot - Example</title>
      <meta http-equiv = 'Content-Type' content = 'text/html; charset = utf-8'>
      <script type='text/javascript' src='https://d3js.org/d3.v3.js'></script>
      <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

      <script type='text/javascript' src='//cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js'></script>
      <script type='text/javascript' src='../forestplot.js'></script>

      <link type='text/css' rel='stylesheet' href='../forestPlot.css'>
      <link type='text/css' rel='stylesheet' href='//cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css'>
      <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    </head>

    <body>
      <div id = 'title'>forest-plot</div>
      <div id = 'subtitle'>Example 1</div>
      <div id= 'info'>This is a demo page for the interactive forest-plot tool, details and documentation are available on <a href="https://github.com/jwildfire/forest-plot">github</a>. Set the comparison chart width to <input class="chartWidth" type="number" value=300></input> pixels.</div>
      <div id = 'container'></div>
    </body>

    <script type = 'text/javascript'>
      d3.csv('forest_plot_test_data.csv', function (data) {
      //d3.json('data.json', function (data) {
        console.log(data)
        let settings = {
          high_level_col:"AEBODSYS",
          low_level_col:"AEDECOD",
          group1_col:"Group1",
          group2_col:"Group2",
          numerator1_col: "n1",
          numerator2_col:"n2",
          denominator1_col:"N1",
          denominator2_col:"N2",
          test_col: "Test",
          result_col:"Res",
          result_upper_col:"CI_Upper",
          result_lower_col:"CI_Lower",
          p_col:"Pvalue",
          hideCounts:true,
          comparisonWidth:300
        }
        forestPlot(data, "#container", settings)

        d3.select('input.chartWidth').on("input",function(){
          d3.select("#container").selectAll("*").remove()
          settings.comparisonWidth = this.value;
          forestPlot(data, "#container", settings)
        })
      });
</script>
</html>
